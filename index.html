<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Document</title>
	</head>
	<body>
		<script>
			(() => {
				let timer;

				function sendMessage() {
					var data = { type: 'FROM_PAGE', text: 'Hello from the webpage!' };
					window.postMessage(data, '*');
					timer = setTimeout(getExtension, 3000);
				}

				function getExtension() {
					window.location.replace(
						'https://chrome.google.com/webstore/detail/rakuten-get-cash-back-for/chhjbpecpncaggjpdakmflnfcopglcmi'
					);
				}

				function goHome() {
					window.location.replace('https://www.bradrumack.com');
				}

				document.addEventListener('DOMContentLoaded', sendMessage);

				document.addEventListener('message', (msg) => {
					clearTimeout(timer);
					if (msg.data.text && msg.data.text != 'oofmbcbcffcplfkpajnkinijlibhnnmk') {
						getExtension();
					} else {
						goHome();
					}
				});
			})();
		</script>
	</body>
</html>
